У цьому проєкті я створила базу даних, яка містить інформацію про міжнародні програми обміну, їхніх спонсорів і учасників. 
База складається з трьох великих таблиць (sponsors, programs і enrollments), у кожній з яких понад 1 000 000 записів. 
Моя мета була знайти тло 100 програм, у яких у 2023 році було найбільше студентів зі статусом “completed”, і показати назву програми та спонсора. 
Перший варіант запиту був спеціально написаний фішкою повільно, щоб потім мені було його легше покращити))). 
У ньому були типові помилки, як наприклад використання  LIKE '%student%' замість точного = 'student'. 
А також фільтрація виконувалась після JOIN, тому MySQL перевіряв дуже багато зайвих рядків. 
Другий запит я переписала так, щоб він давав той самий результат, але працював набагато швидше. 
Я використала CTE для попередньої фільтрації даних з enrollments, прибрала всі функції з умов (DATE(), LOWER(), LIKE '%...%'). 
Завдяки цьому MySQL тепер фільтрує дані набагато раніше, а не після JOIN і обробляє менше рядків. 
Потім для обох запитів я виконала EXPLAIN ANALYZE, щоб порівняти два варіанти до і після оптимізації так би мовити. 

Bonus:
Positive impact
Using the hint /*+ INDEX(e idx_enroll_program_status) */ forces MySQL to use the composite index 
idx_enroll_program_status (program_id, status, role, start_date) when filtering rows from the enrollments table.
This avoids a full table scan. Without the hint MySQL might decide not to use the index and scan all 1+ million rows.
Improves CTE performance, it becomes much faster, since it now reads far fewer rows. 

Negative impact
If the index does not match the filter conditions, it can make the query slower than MySQL’s natural choice.
